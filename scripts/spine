#!/usr/bin/env bash
set -euo pipefail

cmd="${1:-}"

case "$cmd" in
  check)
    echo "URF spine check:"
    if [ -f lakefile.lean ] || [ -f lakefile.toml ]; then
      echo "Running: lake build"
      lake build || {
        echo "Spine build failed"
        exit 1
      }
      echo "OK: spine build completed"
    else
      echo "No lakefile found; spine check is structural only"
    fi
    ;;
  *)
    echo "Usage: ./scripts/spine check"
    exit 2
    ;;
esac
